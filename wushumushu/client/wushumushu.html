<head>
  <title>WushuMushu</title>
</head>


<!--- Home page templates [shows] -->
<template name="shows_page">
<div class='container panel-container'>
  {{>nav_bar}}
	<h1> Shows go here </h1>
     {{#each shows}}
    <div class="show">
    	<a href="{{ pathFor 'actsShow' }}">Show name: {{name}} // Show id:  {{ _id}}</a>
    </div>
  {{/each}}
</div>
</template>




<!--- actS page templates [all acts for given show] -->
<template name="acts_page">
<div class='container panel-container'>
  {{>nav_bar}}
	<h1> Show name: {{#with show}} {{name}} {{/with}}</h1>
	{{#each acts}}
	<a href="{{ pathFor 'actEdit' _show=this.show_id _id=this._id}}">{{name}}</a> 
	{{/each}}

	{{#each acts_list}}
	asnotheusneuht
	{{/each}}
  </div>
</template>




<template name="nav_bar">
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    {{#if loading}}
       <div class='container-fluid'>
       Nav bar loading
       </div>
    {{else}}
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <ul class="nav navbar-nav navbar-left">
            <ol class="breadcrumb list inline">
              <li><a href ="{{pathFor 'home'}}"> Home </a> </li>
              {{#if show_selected}}
                <li><a href="#" onclick="Router.go('actsShow',{_id: Session.get('current_show_id')})" > {{current_show_name}}</a></li>
                {{#if act_selected}}
                  <li> <a href = '#'>{{current_act_name}} </a></li>
                  {{#if section_selected}}
                  <li> <a href = '#'>{{current_section_name}}</a></li>
                  {{/if}}
                {{/if}}
              {{/if}}
            </ol>
        </ul>

        <ul class="nav navbar-nav navbar-right">
            <div class="btn-group">
              <button type="button" class="btn btn-default {{edit_class}}" id="edit-mode-button">Edit</button>
              <button type="button" class="btn btn-default {{view_class}}" id="view-mode-button">View</button>
            </div>
        </ul>
  
    </div><!--container-fluid -->
    {{/if}}
</nav>
</template>



<!--- single act page templates -->
<template name="act_edit_page">

<div class="container panel-container" role="main">

        {{>nav_bar}}
        {{>song_upload}}
        <div class="row">
        {{>sections_pane}}
        {{>moves_pane}}
        {{>weapons_pane}}
        </div>




    </div><!-- panel-container -->

</template>


<template name="song_upload">
<div class="row" id="song-pane">
    <div class="col-sm-7">
        
        <!-- Reference: view-source:http://labs.abeautifulsite.net/demos/bootstrap-file-inputs/ -->
        <div class="input-group edit" style="padding-bottom:2em;">
            <span class="input-group-btn">
                <span class="btn btn-default btn-file">
                    Add Song<input type="file" multiple>
                </span>
            </span>
            <input type="text" class="form-control" placeholder="Browse..." disabled>
        </div>
        
    </div>
</div>
</template>


<template name="sections_pane" >
{{#if loading}}
    Loading Sections pane...
{{else}}

    <!-- Sections -->
<div class="col-sm-3">
    <div class="panel panel-default">
      <div class="panel-heading">Sections</div>
    
      <!-- List group -->
      <div class="list-group" id="section-list">
        {{#unless no_sections}}
          {{#each sections}}
            {{#if editing_section}}
              {{>update_section}}
            {{else}}
              {{>display_section}}
            {{/if}}
          {{/each}}
        {{/unless}}
        
      </div>
    
      {{#if edit_mode}}
       {{#if not_editing_section}}
        <div class="input-group edit" id="new-section-form">
            <input type="text" id="add-section" class="form-control" placeholder="Section">
            <span class="input-group-btn">
              <button class="btn btn-default" id="section-btn" type="button">Add</button>
            </span>      
        </div>
        {{/if}}
      {{/if}}
   
        
    </div>
</div>

{{/if}}

</template>


<template name="display_section">
  <a class="list-group-item section {{maybe_active}}" id="{{name}}-s"> {{name}}
  {{#if edit_mode}}
    <div class="pull-right edit">
      <span class="glyphicon glyphicon-pencil" id="{{name}}-s-pencil" style="padding-right:0.5em;"></span>
      <span class="glyphicon glyphicon-remove" id="{{name}}-s-remove" ></span>
    </div>
  {{/if}}
  </a>
</template>


<template name="update_section">
  <div class="input-group edit" id="{{name}}-form">
    <input type="text" id="update-section" class="form-control" placeholder="{{name}}">
     <span class="input-group-btn">
      <button class="btn btn-default update-btn update-section-btn" id = "{{name}}" type="button">Update</button>
    </span>      
  </div>
</template>


<template name = "moves_pane" >
{{#if loading}}
    Loading moves pane...
{{else}}


    <!-- Moves container -->
<div class="col-sm-4">
    <div class="panel panel-default">
      <div class="panel-heading">Moves</div>
    

      <!-- List group -->
      <div class="list-group" id="move-list">
      {{#unless no_moves}}
        {{#each moves}}
          {{#if editing_move}}
            {{>update_move}}
          {{else}}
            {{>display_move}}
          {{/if}}
        {{/each}}
      {{/unless}}
        
      </div>
    
      <!-- Reference: http://stackoverflow.com/questions/19738807/text-sticking-out-in-bootstrap-3-input-goup-textarea -->
        
      {{#if edit_mode}}
        {{#if not_editing_move}}
          {{>add_move}}
        {{/if}}
      {{/if}}
        
    </div>
</div>
{{/if}}

</template>
  

<template name="display_move">
  <a class="list-group-item move {{maybe_active}}" id="{{name}}-m"> <b>{{name}}</b> 
  {{#if edit_mode}}
    <div class="pull-right edit">
      <span class="glyphicon glyphicon-pencil" id="{{name}}-m-pencil" style="padding-right:0.5em;"></span>
      <span class="glyphicon glyphicon-remove" id="{{name}}-m-remove" ></span>
    </div>
  {{/if}}
  <br> {{info}}
  </a>
</template>


<template name="update_move">
  <form class="form-horizontal" id ="{{name}}-form" role="form">
    <div class="form-group edit" style="padding-top:0.5em;">
      <label for="update-move-title" class="col-sm-2 control-label">Title</label>
       <div class="col-sm-10"> 
        <input class="form-control" id="update-move-title" placeholder="{{name}}"/>    
       </div>
    </div>
    <div class="form-group edit">
      <label for="update-move" class="col-sm-2 control-label">Moves</label>
       <div class="col-sm-10"> 
        <textarea class="form-control" id="update-move" rows="3" placeholder="{{info}}"></textarea>
       </div>
    </div>         
    <div class="form-group edit">
      <div class="col-sm-offset-5">
          <button type="submit" class="btn btn-default update-btn update-move-btn" id="{{name}}"> Update</button>
      </div>
   </div>
  </form>
</template>


<template name="add_move">
  <form class="form-horizontal" role="form" id="new-move-form">
    <div class="form-group edit" style="padding-top:0.5em;">
      <label for="add-move-title" class="col-sm-2 control-label">Title</label>
      
      <div class="col-sm-10">  
        <input class="form-control" id="add-move-title" placeholder="Title" />
      </div>
    </div>
    
    <div class="form-group edit">
      <label for="add-move" class="col-sm-2 control-label">Moves</label>
      
      <div class="col-sm-10">  
        <textarea class="form-control" id="add-move" rows="3" placeholder="Moves"></textarea>
      </div>
    </div>      
          
    <div class="form-group edit">
      <div class="col-sm-offset-5">
          <button type="submit" class="btn btn-default" id="move-btn">Add</button>
      </div>
   </div>
  </form>
</template>


<template name="weapons_pane">
{{#if loading}}
  Loading...
{{else}}
 


  <div class="col-sm-5">
    <!-- Weapons Group Buttons -->

    {{#if edit_and_weapons}}
    <div id="weapon-instructions" align="right" style="margin-top: 0px; right: 10px; color: red; clear: both; display: block;">
            Click on a weapon to edit it
    </div>
    {{/if}}

    <div class="panel panel-default" >
      <div class="panel-heading" >
        <div class="container-fluid">
          <ul class="nav navbar-nav navbar-left" >
          Weapons
          </ul>
          <ul class="nav navbar-nav navbar-right" >
            <div class="btn-group">
               {{#if edit_mode}}
               <button type="button" class="btn btn-default" id="new_weapon_btn" >Add new weapon </button>
              {{/if}}
            </div>
          </ul>
        </div>
      </div>
    </div>
    <!--- Edit/delete row -->


    <div class="btn-group" id = "weaponList">
      {{#if no_weapons}}
      {{/if}}
      {{#each weapons}}
      <button type="button" class="btn btn-default weapon-btn" id="weapon-{{_id}}"> {{name}}</button>
      {{/each}}
    </div>



  <!-- Add Youtube player here 
  0/edit/unselect: Add or select a weapon group first
  1+/edit/unselect: Click on a weapon group to add or edit its video
  1+/edit/select: Click on this weapon group in the list above to add a video
  0/view/unselect: No weapons have been added for this section
  1+/view/unselet: Click on a weapon group to view its video
  1+/view/select: Video/no video has been added to this
   -->
  <div class="panel panel-default" >
    <div class='panel-heading'>
    </div>
    {{#if zero_edit_unselect}}
      Add or select a weapon group first
    {{/if}}

    {{#if plural_edit_unselect}}
      Click on a weapon group to add a video, or edit an existing video.
    {{/if}}

    {{#if plural_edit_select}}
      Click on this weapon group in the list above to edit its video.
    {{/if}}

    {{#if zero_view_unselect}}
      No weapons have been added for this section
    {{/if}}

    {{#if plural_view_unselect}}
      Click on a weapon group to view its video
    {{/if}}

    {{#if plural_view_select}}
      {{#if video_and_selected}}
      {{else}}
      No video has been added for this weapon
      {{/if}}
    {{/if}}
    {{#if video_and_selected}}
      <div class="vid" id = "vidPanel">
        <iframe width="560" height="315" id="youtubePlugin" src="{{embed_url}}" frameborder="0" allowfullscreen></iframe>
      </div> 
    {{/if}}
  </div>
    <!--
    <div class = "panel panel-default" id = "selectWeaponPanel">
      <div class="panel-heading"></div>
        <div class="panel-body edit">
          Add or select a weapon group first, then add a video!
        </div>
        <div class = "panel-body no-edit">
          No video has been added for this weapon. 
        </div>
      </div>
    {{/if}}

    <div class = "panel panel-default" id = "selectMovePanel">
      <div class="panel-heading"></div>
          <div class="panel-body edit">
            Add or select a move first, then worry about weapons and videos.
          </div>
          <div class = "panel-body no-edit">
            No moves have been added for this section.
          </div>
        </div>
        <div class= "panel-default panel" id = "newDivPanel">
          <div class = "panel-heading"> </div>
            <div class = "panel-body no-edit">
              No video has been added for this weapon. 
            </div>
            <div class="panel-body edit">
              <div class= "btn-group btn-group-lg" style="margin: 10px 100px 20px 100px; text-align: center;">
                <button type="button" class="btn btn-default edit-disable" id="linkButton">Insert link to youtube video</button>
              </div>
              <div class= "btn-group btn-group-lg" style="left:15%;  text-align:center;">
                <button type="button" class="btn btn-default edit-disable" id="uploadButton">Upload a video from your computer</button>
              </div>
            </div>
          </div>
          <div class="vid" id = "vidPanel">
            <iframe width="560" height="315" id="youtubePlugin" src="http://www.youtube.com/embed/WzUxxqSMpB0?rel=0" frameborder="0" allowfullscreen></iframe>
          </div>              
        </div>  
        {{/if}}
        -->     
      </div>
{{/if}}

</template>